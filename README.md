# Первая лаба по python

Выполнял: `Ким Олег Артурович`
Группа: `М8О-105БВ-25`

## Описание выбраного подхода

Я решил делать немного гибридный подход. С помошью рекурсивного спуска я преобразую токенизированную строку в RPN, а потом считаю это спомощью стека. Такой подход я выбрал, чтобы пощупать по лучше рекурсивный спуск, так как часть разбиралась на откртый лекции.

---

Моя EBNF нотация:

```shell
<expression> ::= <term> {("+" | "-" ) <term>}
<term> ::= <factor> {("*" | "/") <factor>}
<factor> ::= <unary> {"^" factor}
<primary> ::= NUMBER / <parenthesized> / <unary>
<parenthesized> ::= "(" <expression> ")"
<unary> ::= ("-" | "+")  <primary>
```

---

Токенизация сделана через регулярные выражение за основу взято выражение из открыйтой лекции.

Выражение:

```python
\s*
(
    \d+(?:\.\d+)?
    | \*\*
    | //
    | [%()+\-*/]
)
\s*
```

---

**Некторые допущения**:
    - Вы можете написть унарный плюс, но в итоговый список RPN он добавлен не будет. Я сделал так, потому что унарный плюс ни на что не влияет, а если не влияет, то зачем доблять его в список для расчетов.
    - У унарного минуса самый высокий приоритет, поэтому выражение `-2**2` будет равно `4`. Я делал так, потому что так было сказанно в критриях и самому было интресно смогу ли я правильно дополонить нотацию показанную в откртым уроке.
    - Унарный минус в RPN стеке подменяться на `~`

## Как пользоваться проектом

Запускаем файл `main.py` из корня проекта:

```shell
python3 -m src.main
```

Вам будет предложенно ввдить ваши выражения. Чтобы закончить вводить можете просто ввести `q` или `end`. После этого действия программа завершиться.

---

**Поддерживаемые опреции:**

- `+`  опреция сложения
- `-`  опреция вычитания
- `*`  опреция умножения
- `**`  опреция возведния в степень
- `/`  опреция деления
- `//` операция целочисленного деления
- `%` взятие остатка от деления
- `()` скобочные последовательности

**Приоритетность оперций:**

1. унарные оперции
2. возведение в степень
3. умножение, деление, взяитие остатка
4. плюс и минус

## Что за что отвечает

- `./src/tokenizer.py` - Токенизирует строку к виду токенов: `tuple[type, symbol, start, end]`. Формирует список и отдает все полученые токены.
- `./src/infix_to_prefix.py` - Сама реализация рекурсивного спуска для получения RPN из списка токенов
- `./src/calculate.py` - Функция для расчета полученного списка RPN.
- `./src/errors.py` - Свои ошибки используемые для обработки неправильныз выражений.
- `./src/constants.py` - Константы используемые в проекте(Пока только одна)
- `./src/main.py` - Главная точка входа
- `./test/*` - Все тесты
